<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="pe.gob.repuestera.repository.reportes.ReporteMapper">
    
    <!-- *************** RESULTMAPS ******************* -->
    <resultMap id="ventaCab" type="VentaCabModel">
        <result property="codigoCliente" 			column="COD_CLIENTE" />
        <result property="nroDocCliente" 			column="NRO_DOC_CLIENTE" />
        <result property="nombreCliente" 			column="NOMBRE_CLIENTE" />
        <result property="direccionFiscal" 			column="DIRECCION_FISCAL" />
        <result property="fechaContabilizacion" 	column="FEC_CONTABILIZACION" />
        <result property="fechaValidoHasta" 		column="FEC_VALIDO_HASTA" />
        <result property="codigoTipoMoneda" 		column="COD_TIPO_MONEDA" />
        <result property="descripcionTipoMoneda"	column="DESC_TIPO_MONEDA" />
        <result property="codigoCondPago" 			column="COD_COND_PAGO" />
        <result property="descripcionCondPago"		column="DESC_COND_PAGO" />
        <result property="codigoDias" 				column="COD_DIAS" />
        <result property="descripcionDias" 			column="DESC_COD_DIAS" />
        <result property="codigoEstado" 			column="COD_ESTADO" />
        <result property="descripcionEstado"		column="DESC_ESTADO" />
        <result property="nroRequerimiento"			column="NRO_REQUERIMIENTO" />
        <result property="asunto"					column="ASUNTO" />
        <result property="observaciones"			column="OBSERVACIONES" />
        <result property="numeroDocumentoRef"		column="NRO_DOC_REFERENCIA" />        
        <result property="porcDctoTotal"			column="PORC_DCTO_TOTAL" />        
        <result property="subTotal"					column="SUBTOTAL" />
        <result property="descuento"				column="DESCUENTO" />
        <result property="igv"						column="IGV" />
        <result property="total" 					column="TOTAL" />
        <result property="activo"					column="ACTIVO" />        
        <result property="asunto"					column="ASUNTO" />
        <result property="atencion"					column="ATENCION" />
    </resultMap>
    
    <resultMap id="ventaDet" type="hashmap">
        <result property="COD_ARTICULO" 		column="COD_ARTICULO" />
        <result property="COD_ESTANDAR" 		column="COD_ESTANDAR" />
        <result property="DESCRIPCION" 			column="DESCRIPCION" />
        <result property="MARCA_ARTICULO" 		column="MARCA_ARTICULO" />
        <result property="CANTIDAD" 			column="CANTIDAD" />
        <result property="PRECIO_UNITARIO"		column="PRECIO_UNITARIO" />
        <result property="PORC_DCTO"			column="PORC_DCTO" />
        <result property="PRECIO_CON_DCTO"		column="PRECIO_CON_DCTO" />
        <result property="SUB_TOTAL" 			column="SUB_TOTAL" />
    </resultMap>
    
    
    <!-- ********************* PARAMETERMAPS ********************* -->
    <parameterMap id="cotizacionVentaParams" type="hashmap">
        <parameter property="NRO_DOCUMENTO"			jdbcType="VARCHAR"  mode="IN"/>
        <parameter property="FLAG_RESULTADO"   		jdbcType="VARCHAR"  mode="OUT"/>
        <parameter property="MENSAJE_RESULTADO"    	jdbcType="VARCHAR"  mode="OUT"/>
    </parameterMap>
    
    
    <!-- ************************* QUERYS ******************************* -->
    <select id="obtenerCabeceraCotizacionVenta" parameterMap="cotizacionVentaParams" resultMap="ventaCab" statementType="CALLABLE">
      {CALL SP_REP_CAB_COTIZACION_VENTA(?,?,?) }
    </select>
    
    <select id="obtenerDetalleCotizacionVenta" parameterMap="cotizacionVentaParams" resultMap="ventaDet" statementType="CALLABLE">
      {CALL SP_REP_DET_COTIZACION_VENTA(?,?,?) }
    </select>
    
</mapper>